
<!DOCTYPE html>
<html lang="en">
<script>
    var products_key = "Consoles";
if (params.has("prod_key")){
    products_key = params.get("prod_key");
}
var products = allproducts[products_key];           
</script>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eden's Game Store</title>
    <script src="./products_data.js"></script>
    <script src="./function.js"></script>

    <!-- Link from CSS Bootstrap -->
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
</head>

<body>

    <nav class="bg-light">
        <div class="container-fluid">
                <h1 class="d-flex justify-content-center" a href="#" onclick="window.location.href = 'index.html'">Home</a></h1>
            <h1><script>nav_bar(products_key, allproducts);</script></h1>
        </div>
    </nav>

<script> 
function addToCart() {
    for(let i in products) {
        params.set(`Quantity[${i}]`, product_form[`Quantity[${i}]`].value);
    }
    console.log(params.toString());
    loadJSON('./addToCart?' + params.toString(), function(resp) {alert(resp)});
}
        // get the query string
        params = (new URL(document.location)).searchParams;
        if (params.has('products_key')) {
            var this_product_key = params.get('products_key');
        } else {
            document.write('no products key in query string');
            document.stop;
        }

        var products_data;
        loadJSON('get_products_data', function (response) {
            // Parsing JSON string into object
            products_data = JSON.parse(response);
        });

        var cart;
        loadJSON('get_cart', function (response) {
            // Parsing JSON string into object
            cart= JSON.parse(response);
        });

//Taken from Assignment 3 code examples
    var products;
    loadJSON(`get_products_data`, function (response) {
        //Parse JSON string into Object
        products = JSON.parse(repsonse)
        console.log(products)
    });

    var cart;
    //Parse JSON string into Object
    loadJSON(`get_cart`, function (response) {
        cart = JSON.parse(response);

    });


</script>

</body>

</html>